{% load static %}
<!-- Bootstrap and necessary plugins -->
<script src="{% static 'dist/vendors/js/jquery.min.js' %}"></script>
<script src="{% static 'dist/vendors/js/popper.min.js' %}"></script>
<script src="{% static 'dist/vendors/js/bootstrap.min.js' %}"></script>
<script src="{% static 'dist/vendors/js/pace.min.js' %}"></script>
<script src="{% static 'dist/js/views/main.js' %}"></script>
<script src="{% static 'dist/js/app.js' %}"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
<script>

    // tooltip data
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });

    $(document).ready(function() {
      $('.select2').select2();
    });

    // calendar component
    $(function () {
        $.datetimepicker.setLocale('pt-BR');
        $("#datetimepicker").datetimepicker({
            timepicker: false,
            format: 'd/m/Y',
        });
    });

    // search input database
   $(function () {
    const dateColumn = 6;

    $('#date').mask("99/99/9999").on('input', function () {
        const filterText = $(this).val().toLowerCase();

        $('#table tbody tr').each(function () {
            const dateValue = $(this).find('td:eq(' + dateColumn + ')').text().toLowerCase();
            const display = dateValue.includes(filterText) ? 'table-row' : 'none';
            $(this).css('display', display);
        });
    });
});

    // select repeat input
  document.addEventListener("DOMContentLoaded", function() {
  let checkbox = document.getElementById("checkbox");
  let select = document.getElementById("select");
  let total_installments = document.getElementById("total_installments");


  if (total_installments.value && checkbox.checked == true) {
    select.style.display = "inline-block";
    total_installments.style.display = "inline-block";
    checkbox.checked = true;
  } else {
    checkbox.checked = false;
  }

// checkbox input is checked
  checkbox.addEventListener("change", function() {
    if (this.checked || total_installments.value) {
             select.style.display = "inline-block";
              total_installments.style.display = "inline-block";
    } else {
      select.style.display = "none";
      total_installments.style.display = "none";
    }
  });
});


    // search input table
    $(document).ready(function () {
        $("#filter").on("change", function () {
            const value = $(this).val();
            if (value === "revenue") {
                $("#table tbody tr").show();
                $("#table tbody tr .transaction.expense").closest("tr").hide();
            } else if (value === "expense") {
                $("#table tbody tr").show();
                $("#table tbody tr .transaction.revenue").closest("tr").hide();
            } else {
                $("#table tbody tr").show();
            }
        });
    });

setInterval(function() {
  var button = document.getElementById("notificationButton");
      if (button) {
        button.classList.toggle("flash");
      }
    }, 1000);
 $(document).ready(function () {
    $('#myTabs a').on('shown.bs.tab', function (e) {
        // Atualiza o valor de installments.installments na interface do usuário
        var selectedTab = $(e.target).attr('href'); // obtém o ID da aba ativa
        console.log(selectedTab)
        var installmentsValue = $(selectedTab).find('#installmentsValue').text();
        console.log(installmentsValue)
        $('#installmentsValue').text(installmentsValue);
         var tabNumber = parseInt(selectedTab.substring(4)); // extrai o número da aba a partir do ID
         var totalInstallments = parseInt($('.installmentsValue').data('total'));

         var currentInstallment = tabNumber + 1;

            // Atualiza o valor na interface do usuário
            $('.installmentsValue').text(currentInstallment + '/' + totalInstallments);
    });
 });

Calendario de transactions details
  let currentDate = new Date();
  let currentMonth = currentDate.getMonth() + 1;
  let currentYear = currentDate.getFullYear();

  function renderCalendar(month, year) {
    const calendarBody = document.getElementById('calendar-body');
    calendarBody.innerHTML = '';

    const daysInMonth = new Date(year, month, 0).getDate();
    const firstDay = new Date(year, month - 1, 1).getDay();

    let dayCounter = 1;

    for (let i = 0; i < 6; i++) {
      const row = document.createElement('tr');

      for (let j = 0; j < 7; j++) {
        const cell = document.createElement('td');

        if ((i === 0 && j < firstDay) || dayCounter > daysInMonth) {
          cell.innerHTML = '';
        } else {
          cell.innerHTML = dayCounter;
          dayCounter++;
        }

        row.appendChild(cell);
      }

      calendarBody.appendChild(row);
    }

    document.getElementById('current-month').innerText = `${getMonthName(month)} ${year}`;
  }

  function prevMonth() {
    currentMonth--;
    if (currentMonth === 0) {
      currentMonth = 12;
      currentYear--;
    }
    renderCalendar(currentMonth, currentYear);
  }

  function nextMonth() {
    currentMonth++;
    if (currentMonth === 13) {
      currentMonth = 1;
      currentYear++;
    }
    renderCalendar(currentMonth, currentYear);
  }

  function getMonthName(month) {
    const months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
    return months[month - 1];
  }

  renderCalendar(currentMonth, currentYear);
</script>
{% block script %}
{% endblock %}

